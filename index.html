<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حصن المسلم</title>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-867BEDX0FY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-867BEDX0FY');
</script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body {
            font-family: 'Amiri', serif;
            font-family: 'Open Sans', sans-serif;
        }
        .arabic-text {
            font-family: 'Amiri', serif;
            line-height: 1.7;
        }
        .latin-text {
            font-family: 'Open Sans', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            font-weight: bold;
        }
        p {
            margin-bottom: 1rem;
        }
        .search-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        .search-input {
            border-radius: 0.5rem 0 0 0.5rem;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            width: 100%;
            max-width: 400px;
            font-family: 'Open Sans', sans-serif;
            outline: none;
        }
        .search-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
        }
        .search-button {
            background-color: #fff;
            border-radius: 0 0.5rem 0.5rem 0;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-left: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            color: #4a5568;
        }
        .search-button:hover {
            background-color: #f7fafc;
        }
        .copy-button, .share-button {
            background-color: #e2e8f0;
            color: #4a5568;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
            margin-left: 0.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .copy-button:hover, .share-button:hover {
            background-color: #3b82f6;
            color: white;
        }
        .icon {
            width: 1rem;
            height: 1rem;
        }
        #index-button {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background-color: #fff;
            color: #4a5568;
            padding: 0.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            z-index: 10;
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
        }
        #index-button:hover {
            background-color: #f7fafc;
        }
        #index-container {
            position: fixed;
            top: 4rem;
            right: 1rem;
            background-color: #fff;
            border-radius: 0.375rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            z-index: 10;
            width: 250px;
            max-height: calc(100vh - 5rem);
            overflow-y: auto;
            padding: 0.5rem;
            display: none;
            border: 1px solid #e2e8f0;
        }
        #index-container.open {
            display: block;
        }
        #index-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #index-list li {
            padding: 0.5rem;
            cursor: pointer;
            border-bottom: 1px solid #e2e8f0;
        }
        #index-list li:hover {
            background-color: #f7fafc;
        }
        .dark .bg-gray-100 {
            background-color: #1a202c;
        }
        .dark .bg-white {
            background-color: #2d3748;
        }
        .dark .text-gray-800 {
            color: #f7fafc;
        }
        .dark .text-gray-600 {
            color: #cbd5e0;
        }
        .dark .text-gray-700 {
            color: #e2e8f0;
        }
        .dark .dark\:bg-gray-800 {
            background-color: #2d3748;
        }
        .dark .dark\:text-white{
             color: #fff;
        }
        .dark .dark\:bg-gray-700{
             background-color: #4a5568;
        }
        .dark #search{
            background-color: #2d3748;
            border-color: #4a5568;
            color: #fff;
        }
        .dark #search:focus{
             box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        #night-mode-button {
            position: fixed;
            top: 1rem;
            left: 1rem;
            background-color: #fff;
            color: #4a5568;
            padding: 0.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            z-index: 10;
            border: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
        }
        #night-mode-button:hover {
            background-color: #f7fafc;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900">
    <header class="bg-white dark:bg-gray-800 shadow-md py-4">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white text-center arabic-text">حصن المسلم</h1>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="search-container">
            <input type="text" id="search" placeholder="ابحث في الأذكار..." class="search-input">
            <button id="search-button" class="search-button" aria-label="بحث">
                <i class="fas fa-search"></i>
            </button>
        </div>
        <div id="results" class="mt-6">
            </div>
        <section id="azkar-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </section>
    </main>

    <footer class="bg-white dark:bg-gray-800 py-4 mt-8">
        <div class="container mx-auto px-4 text-center text-gray-600 dark:text-gray-400">
            <p class="arabic-text">نسخة إلكترونية من كتاب حصن المسلم. جميع الحقوق محفوظة.</p>
        </div>
    </footer>

    <button id="index-button" aria-label="عرض الفهرس">
        <i class="fas fa-list-ul"></i>
    </button>
    <div id="index-container">
        <ul id="index-list">
            </ul>
    </div>
    <button id="night-mode-button" aria-label="تبديل الوضع الليلي">
        <i class="fas fa-sun" id="night-mode-icon"></i>
    </button>

    <script>
        const azkarList = [
            { title: "دعاء الاستيقاظ", content: "الحمد لله الذي أحيانا بعد ما أماتنا وإليه النشور", category: "الأذكار اليومية" },
            { title: "دعاء لبس الثوب", content: "اللهم إني أسألك خيره وخير ما هو له، وأعوذ بك من شره وشر ما هو له", category: "الأذكار اليومية" },
            { title: "دعاء دخول الخلاء", content: "بسم الله، اللهم إني أعوذ بك من الخبث والخبائث", category: "الأذكار اليومية" },
            { title: "دعاء الخروج من الخلاء", content: "غفرانك", category: "الأذكار اليومية" },
            { title: "دعاء قبل الوضوء", content: "بسم الله", category: "الوضوء" },
            { title: "دعاء بعد الوضوء", content: "أشهد أن لا إله إلا الله وحده لا شريك له، وأشهد أن محمداً عبده ورسوله، اللهم اجعلني من التوابين واجعلني من المتطهرين", category: "الوضوء" },
            { title: "دعاء الذهاب إلى المسجد", content: "اللهم اجعل في قلبي نوراً، وفي لساني نوراً، واجعل في سمعي نوراً، واجعل في بصري نوراً، واجعل من خلفي نوراً، ومن أمامي نوراً، واجعل من فوقي نوراً، ومن تحتي نوراً، اللهم أعطني نوراً", category: "الصلاة" },
            { title: "دعاء دخول المسجد", content: "أعوذ بالله العظيم وبوجهه الكريم وسلطانه القديم من الشيطان الرجيم، بسم الله والصلاة والسلام على رسول الله، اللهم افتح لي أبواب رحمتك", category: "الصلاة" },
            { title: "دعاء الخروج من المسجد", content: "بسم الله والصلاة والسلام على رسول الله، اللهم إني أسألك من فضلك", category: "الصلاة" },
            { title: "أذكار الصباح", content: "أصبحنا وأصبح الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير، رب أسألك خير ما في هذا اليوم وخير ما بعده، وأعوذ بك من شر ما في هذا اليوم وشر ما بعده، رب أعوذ بك من الكسل وسوء الكبر، رب أعوذ بك من عذاب في النار وعذاب في القبر", category: "أذكار الصباح والمساء" },
            { title: "أذكار المساء", content: "أمسينا وأمسى الملك لله، والحمد لله، لا إله إلا الله وحده لا شريك له، له الملك وله الحمد وهو على كل شيء قدير، رب أسألك خير ما في هذه الليلة وخير ما بعدها، وأعوذ بك من شر ما في هذه الليلة وشر ما بعدها، رب أعوذ بك من الكسل وسوء الكبر، رب أعوذ بك من عذاب في النار وعذاب في القبر", category: "أذكار الصباح والمساء" },
            { title: "دعاء قبل النوم", content: "باسمك ربي وضعت جنبي وبك أرفعه، إن أمسكت نفسي فارحمها، وإن أرسلتها فاحفظها بما تحفظ به عبادك الصالحين", category: "أذكار النوم" },
            { title: "الدعاء إذا تقلب ليلاً", content: "لا إله إلا الله الواحد القهار، رب السماوات والأرض وما بينهما العزيز الغفار", category: "أذكار النوم" },
            { title: "دعاء القنوت", content: "اللهم اهدني فيمن هديت، وعافني فيمن عافيت، وتولني فيمن توليت، وبارك لي فيما أعطيت، وقني شر ما قضيت، فإنك تقضي ولا يقضى عليك، إنه لا يذل من واليت، ولا يعز من عاديت، تباركت ربنا وتعاليت", category: "أدعية متفرقة" },
            { title: "دعاء السفر", content: "الله أكبر، الله أكبر، الله أكبر، سبحان الذي سخر لنا هذا وما كنا له مقرنين، وإنا إلى ربنا لمنقلبون، اللهم إنا نسألك في سفرنا هذا البر والتقوى، ومن العمل ما ترضى، اللهم هون علينا سفرنا هذا واطو عنا بعده، اللهم أنت الصاحب في السفر، والخليفة في الأهل، اللهم إني أعوذ بك من وعثاء السفر، وكآبة المنظر، وسوء المنقلب في المال والأهل", category: "أدعية متفرقة" },
            { title: "دعاء دخول المنزل", content: "بسم الله ولجنا، وبسم الله خرجنا، وعلى الله ربنا توكلنا", category: "أدعية متفرقة" },
            { title: "دعاء الخروج من المنزل", content: "بسم الله توكلت على الله، لا حول ولا قوة إلا بالله", category: "أدعية متفرقة" },
            { title: "دعاء الركوب", content: "بسم الله، سبحان الذي سخر لنا هذا وما كنا له مقرنين، وإنا إلى ربنا لمنقلبون", category: "أدعية متفرقة" },
            { title: "دعاء دخول القرية أو البلدة", content: "اللهم بارك لنا فيها، اللهم ارزقنا جناها، وحببنا إلى أهلها، وحبب صالحي أهلها إلينا", category: "أدعية متفرقة" },
            { title: "دعاء السوق", content: "لا إله إلا الله وحده لا شريك له، له الملك وله الحمد، يحيي ويميت وهو حي لا يموت، بيده الخير كله، وهو على كل شيء قدير", category: "أدعية متفرقة" },
            { title: "دعاء للمريض", content: "بسم الله، اللهم اشف عبدك وابن أمتك", category: "الدعاء للمريض" },
            { title: "دعاء العزاء", content: "إنا لله وإنا إليه راجعون، اللهم أجرني في مصيبتي وأخلف لي خيراً منها", category: "الدعاء للمريض" },
            { title: "الدعاء عند المصيبة", content: "إنا لله وإنا إليه راجعون، اللهم أجرني في مصيبتي وأخلف لي خيراً منها", category: "الدعاء للمريض" },
            { title: "دعاء الريح", content: "اللهم إني أسألك خيرها، وخير ما فيها، وخير ما أرسلت به، وأعوذ بك من شرها، وشر ما فيها، وشر ما أرسلت به", category: "أدعية متفرقة" },
            { title: "دعاء المطر", content: "اللهم صيباً نافعاً", category: "أدعية متفرقة" },
            { title: "دعاء الرعد", content: "سبحان الذي يسبح الرعد بحمده والملائكة من خيفته", category: "أدعية متفرقة" },
            { title: "دعاء رؤية الهلال", content: "الله أكبر، اللهم أهله علينا بالأمن والإيمان، والسلامة والإسلام، والتوفيق لما تحب وترضى، ربنا وربك الله", category: "أدعية متفرقة" },
            { title: "دعاء الفزع", content: "أعوذ بكلمات الله التامات من غضبه وعقابه وشر عباده ومن همزات الشياطين وأن يحضرون", category: "أدعية متفرقة" },
            { title: "دعاء الكرب", content: "لا إله إلا الله العظيم الحليم، لا إله إلا الله رب العرش العظيم، لا إله إلا الله رب السماوات ورب الأرض ورب العرش الكريم", category: "أدعية متفرقة" },
            { title: "دعاء الهم والحزن", content: "اللهم إني عبدك ابن عبدك ابن أمتك، ناصيتي بيدك، ماض في حكمك، عدل في قضاؤك، أسألك بكل اسم هو لك سميت به نفسك، أو أنزلته في كتابك، أو علمته أحداً من خلقك، أو استأثرت به في علم الغيب عندك، أن تجعل القرآن ربيع قلبي، ونور صدري، وجلاء حزني، وذهاب همي", category: "أدعية متفرقة" },
            { title: "دعاء قضاء الدين", content: "اللهم اكفني بحلالك عن حرامك، وأغنني بفضلك عمن سواك", category: "أدعية متفرقة" },
            { title: "دعاء الوسوسة في الصلاة والقراءة", content: "أعوذ بالله من الشيطان الرجيم", category: "أدعية متفرقة" },
            { title: "دعاء من أصابته مصيبة", content: "إنا لله وإنا إليه راجعون، اللهم أجرني في مصيبتي وأخلف لي خيراً منها", category: "أدعية متفرقة" },
            { title: "دعاء الاستخارة", content: "اللهم إني أستخيرك بعلمك، وأستقدرك بقدرتك، وأسألك من فضلك العظيم، فإنك تقدر ولا أقدر، وتعلم ولا أعلم، وأنت علام الغيوب...", category: "أدعية متفرقة" },
             { title: "الدعاء عند الفرح", content: "الحمد لله الذي بنعمته تتم الصالحات", category: "أدعية متفرقة" },
            { title: "ما يقوله من أتاه أمر يسره أو يكرهه", content: "الحمد لله على كل حال", category: "أدعية متفرقة" },
            { title: "دعاء الطعام", content: "بسم الله", category: "أدعية الطعام والشراب" },
            { title: "الدعاء بعد الطعام", content: "الحمد لله الذي أطعمني هذا ورزقنيه من غير حول مني ولا قوة", category: "أدعية الطعام والشراب" },
            { title: "دعاء الضيف لصاحب الطعام", content: "اللهم بارك لهم فيما رزقتهم، واغفر لهم وارحمهم", category: "أدعية الطعام والشراب" },
            { title: "الدعاء لمن سقاه أو أراد ذلك", content: "اللهم أطعم من أطعمني، واسق من سقاني", category: "أدعية الطعام والشراب" },
            { title: "دعاء العطاس", content: "الحمد لله", category: "أدعية متفرقة" },
            { title: "تشميت العاطس", content: "يرحمك الله", category: "أدعية متفرقة" },
            { title: "دعاء المتزوج", content: "بارك الله لكما وبارك عليكما وجمع بينكما في خير", category: "أدعية متفرقة" },
            { title: "دعاء المولود", content: "بارك الله لك في الموهوب لك، وشكرت الواهب، وبلغ أشده، ورزقت بره", category: "أدعية متفرقة" },
            { title: "ما يقوله من رآى مبتلى", content: "الحمد لله الذي عافاني مما ابتلاك به، وفضلني على كثير ممن خلق تفضيلاً", category: "أدعية متفرقة" },
            { title: "دعاء الغضب", content: "أعوذ بالله من الشيطان الرجيم", category: "أدعية متفرقة" },
            { title: "الدعاء عند إفطار الصائم", content: "ذهب الظمأ وابتلت العروق وثبت الأجر إن شاء الله", category: "أدعية متفرقة" },
             { title: "دعاء ليلة القدر", content: "اللهم إنك عفو تحب العفو فاعف عني", category: "أدعية متفرقة" },
        ];

        const indexButton = document.getElementById("index-button");
        const indexContainer = document.getElementById("index-container");
        const indexList = document.getElementById("index-list");
        const nightModeButton = document.getElementById("night-mode-button");
        const nightModeIcon = document.getElementById("night-mode-icon");
        const searchInput = document.getElementById("search");
        const searchButton = document.getElementById("search-button");

        let isIndexOpen = false;
        let isNightMode = false;

        const categories = [...new Set(azkarList.map(item => item.category))];
        categories.forEach(category => {
            const li = document.createElement("li");
            li.textContent = category;
            li.dataset.category = category;
            indexList.appendChild(li);
        });

        indexButton.addEventListener("click", () => {
            isIndexOpen = !isIndexOpen;
            indexContainer.classList.toggle("open", isIndexOpen);
        });

        indexList.addEventListener("click", (event) => {
            const category = event.target.dataset.category;
            if (category) {
                const filteredAzkar = azkarList.filter(item => item.category === category);
                displayAzkar(filteredAzkar);
                isIndexOpen = false;
                indexContainer.classList.remove("open");
            }
        });

        nightModeButton.addEventListener("click", () => {
            isNightMode = !isNightMode;
            document.body.classList.toggle("dark", isNightMode);
            nightModeIcon.classList.toggle("fa-sun", !isNightMode);
            nightModeIcon.classList.toggle("fa-moon", isNightMode);
        });

        function displayAzkar(azkar) {
            const azkarListContainer = document.getElementById("azkar-list");
            azkarListContainer.innerHTML = "";

            azkar.forEach(zekr => {
                const zekrDiv = document.createElement("div");
                zekrDiv.classList.add("bg-white", "dark:bg-gray-700", "rounded-lg", "shadow-md", "p-4", "flex", "flex-col", "justify-between");

                const titleElement = document.createElement("h2");
                titleElement.classList.add("text-xl", "font-semibold", "text-gray-800", "dark:text-white", "mb-2", "arabic-text");
                titleElement.textContent = zekr.title;

                const contentElement = document.createElement("p");
                contentElement.classList.add("text-gray-700", "dark:text-gray-300", "leading-relaxed", "arabic-text");
                contentElement.textContent = zekr.content;

                const buttonContainer = document.createElement("div");
                buttonContainer.classList.add("flex", "justify-end", "mt-4");

                const copyButton = document.createElement("button");
                copyButton.classList.add("copy-button");
                copyButton.textContent = "نسخ";
                const copyIcon = document.createElement("i");
                copyIcon.classList.add("fas", "fa-copy", "icon");
                copyButton.prepend(copyIcon);

                copyButton.addEventListener("click", () => {
                    const textToCopy = `${zekr.title}\n${zekr.content}`;
                    navigator.clipboard.writeText(textToCopy).then(() => {
                        alert("تم نسخ الذكر إلى الحافظة!");
                    }).catch(err => {
                        console.error('Failed to copy: ', err);
                        alert("فشل نسخ الذكر!");
                    });
                });

                const shareButton = document.createElement("button");
                shareButton.classList.add("share-button");
                shareButton.textContent = "مشاركة";
                const shareIcon = document.createElement("i");
                shareIcon.classList.add("fas", "fa-share", "icon");
                shareButton.prepend(shareIcon);
                shareButton.addEventListener("click", () => {
                    if (navigator.share) {
                        navigator.share({
                            title: zekr.title,
                            text: zekr.content,
                        }).then(() => {
                            console.log('Successful share');
                        }).catch((error) => {
                            console.log('Error sharing', error);
                            alert("فشل مشاركة الذكر!");
});
                    } else {
                        const textToShare = `${zekr.title}\n${zekr.content}`;
                        alert(`انسخ هذا النص وشاركه يدويًا:\n\n${textToShare}`);
                    }
                });

                buttonContainer.appendChild(copyButton);
                buttonContainer.appendChild(shareButton);

                zekrDiv.appendChild(titleElement);
                zekrDiv.appendChild(contentElement);
                zekrDiv.appendChild(buttonContainer);

                azkarListContainer.appendChild(zekrDiv);
            });
        }

        function filterAzkar(searchTerm) {
            const filteredAzkar = azkarList.filter(zekr => {
                return zekr.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                       zekr.content.toLowerCase().includes(searchTerm.toLowerCase());
            });
            displayAzkar(filteredAzkar);
        }

        searchInput.addEventListener("input", (event)=> {
            filterAzkar(event.target.value);
        });
        searchButton.addEventListener("click", () => {
            filterAzkar(searchInput.value);
        });

        // Initial display of all azkar
        displayAzkar(azkarList);
    </script>
</body>
</html>
